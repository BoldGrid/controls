/*! For license information please see iris.min.js.LICENSE.txt */
!function(r,i){function t(r,i){return r="top"===r?"top":"left",i=Array.isArray(i)?i:Array.prototype.slice.call(arguments,1),"webkit"===c?s(r,i):h[c]+"linear-gradient("+r+", "+i.join(", ")+")"}function e(i,t){var e,s,n,a,l;i="top"===i?"top":"left",t=Array.isArray(t)?t:Array.prototype.slice.call(arguments,1),e="top"===i?0:1,s=r(this),n=t.length-1,a='<div class="iris-ie-gradient-shim" style="position:absolute;'+(1===e?"height":"width")+":100%;"+(1===e?"left":"top")+":%start%;"+(1===e?"right":"bottom")+':%end%;filter:%filter%;" data-color:"%color%"></div>',l="","static"===s.css("position")&&s.css({position:"relative"}),t=o(t),r.each(t,(function(r,i){var s,o,c;if(r===n)return!1;s=t[r+1],i.stop!==s.stop&&(o=100-parseFloat(s.stop)+"%",i.octoHex=new Color(i.color).toIEOctoHex(),s.octoHex=new Color(s.color).toIEOctoHex(),c="progid:DXImageTransform.Microsoft.Gradient(GradientType="+e+", StartColorStr='"+i.octoHex+"', EndColorStr='"+s.octoHex+"')",l+=a.replace("%start%",i.stop).replace("%end%",o).replace("%filter%",c))})),s.find(".iris-ie-gradient-shim").remove(),r(l).prependTo(s)}function s(i,t){var e=[];return i="top"===i?"0% 0%,0% 100%,":"0% 100%,100% 100%,",t=o(t),r.each(t,(function(r,i){e.push("color-stop("+parseFloat(i.stop)/100+", "+i.color+")")})),"-webkit-gradient(linear,"+i+e.join(",")+")"}function o(i){var t=[],e=[],s=[],o=i.length-1;return r.each(i,(function(r,i){var s=i,o=!1,n=i.match(/1?[0-9]{1,2}%$/);n&&(s=i.replace(/\s?1?[0-9]{1,2}%$/,""),o=n.shift()),t.push(s),e.push(o)})),!1===e[0]&&(e[0]="0%"),!1===e[o]&&(e[o]="100%"),e=n(e),r.each(e,(function(r){s[r]={color:t[r],stop:e[r]}})),s}function n(i){var t,e,s,o,a=0,l=i.length-1,c=0,h=!1;if(i.length<=2||r.inArray(!1,i)<0)return i;for(;c<i.length-1;)h||!1!==i[c]?h&&!1!==i[c]&&(l=c,c=i.length):(a=c-1,h=!0),c++;for(e=l-a,o=parseInt(i[a].replace("%"),10),t=(parseFloat(i[l].replace("%"))-o)/e,c=a+1,s=1;c<l;)i[c]=o+s*t+"%",s++,c++;return n(i)}var a,l,c,h,p,u,d,f;if(a='<div class="iris-picker"><div class="iris-picker-inner"><div class="iris-square"><a class="iris-square-value" href="#"><span class="iris-square-handle ui-slider-handle"></span></a><div class="iris-square-inner iris-square-horiz"></div><div class="iris-square-inner iris-square-vert"></div></div><div class="iris-slider iris-strip"><div class="iris-slider-offset"></div></div></div></div>',u=navigator.userAgent.toLowerCase(),d="Microsoft Internet Explorer"===navigator.appName,f=d?parseFloat(u.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,c=!1,h=["-moz-","-webkit-","-o-","-ms-"],(l=d&&f<10)&&f<=7)return r.fn.iris=r.noop,void(r.support.iris=!1);r.support.iris=!0,r.fn.gradient=function(){var i=arguments;return this.each((function(){l?e.apply(this,i):r(this).css("backgroundImage",t.apply(this,i))}))},r.fn.rainbowGradient=function(i,t){var e,s,o,n;for(i=i||"top",s="hsl(%h%,"+(e=r.extend({},{s:100,l:50},t)).s+"%,"+e.l+"%)",o=0,n=[];o<=360;)n.push(s.replace("%h%",o)),o+=30;return this.each((function(){r(this).gradient(i,n)}))},p={options:{color:!1,mode:"hsl",controls:{horiz:"s",vert:"l",strip:"h"},hide:!0,border:!0,target:!1,width:200,palettes:!1,type:"full",slider:"horizontal"},_color:"",_palettes:["#000","#fff","#d33","#d93","#ee2","#81d742","#1e73be","#8224e3"],_inited:!1,_defaultHSLControls:{horiz:"s",vert:"l",strip:"h"},_defaultHSVControls:{horiz:"h",vert:"v",strip:"s"},_scale:{h:360,s:100,l:100,v:100},_create:function(){var i=this,t=i.element,e=i.options.color||t.val();!1===c&&function(){var i,t="backgroundImage";l?c="filter":(i=r('<div id="iris-gradtest" />'),r.each(h,(function(r,e){if(i.css(t,e+"linear-gradient(top,#fff,#000)"),i.css(t).match("gradient"))return c=r,!1})),!1===c&&(i.css("background","-webkit-gradient(linear,0% 0%,0% 100%,from(#fff),to(#000))"),i.css(t).match("gradient")&&(c="webkit")),i.remove())}(),t.is("input")?(i.options.target?i.picker=r(a).appendTo(i.options.target):i.picker=r(a).insertAfter(t),i._addInputListeners(t)):(t.append(a),i.picker=t.find(".iris-picker")),d?9===f?i.picker.addClass("iris-ie-9"):f<=8&&i.picker.addClass("iris-ie-lt9"):u.indexOf("compatible")<0&&u.indexOf("khtml")<0&&u.match(/mozilla/)&&i.picker.addClass("iris-mozilla"),i.options.palettes&&i._addPalettes(),i.onlySlider="hue"===i.options.type,i.horizontalSlider=i.onlySlider&&"horizontal"===i.options.slider,i.onlySlider&&(i.options.controls.strip="h",e||(e="hsl(10,100,50)")),i._color=new Color(e).setHSpace(i.options.mode),i.options.color=i._color.toString(),i.controls={square:i.picker.find(".iris-square"),squareDrag:i.picker.find(".iris-square-value"),horiz:i.picker.find(".iris-square-horiz"),vert:i.picker.find(".iris-square-vert"),strip:i.picker.find(".iris-strip"),stripSlider:i.picker.find(".iris-strip .iris-slider-offset")},"hsv"===i.options.mode&&i._has("l",i.options.controls)?i.options.controls=i._defaultHSVControls:"hsl"===i.options.mode&&i._has("v",i.options.controls)&&(i.options.controls=i._defaultHSLControls),i.hue=i._color.h(),i.options.hide&&i.picker.hide(),i.options.border&&!i.onlySlider&&i.picker.addClass("iris-border"),i._initControls(),i.active="external",i._dimensions(),i._change()},_has:function(i,t){var e=!1;return r.each(t,(function(r,t){if(i===t)return e=!0,!1})),e},_addPalettes:function(){var i=r('<div class="iris-palette-container" />'),t=r('<a class="iris-palette" tabindex="0" />'),e=Array.isArray(this.options.palettes)?this.options.palettes:this._palettes;this.picker.find(".iris-palette-container").length&&(i=this.picker.find(".iris-palette-container").detach().html("")),r.each(e,(function(r,e){t.clone().data("color",e).css("backgroundColor",e).appendTo(i).height(10).width(10)})),this.picker.append(i)},_paint:function(){var r=this;r.horizontalSlider?r._paintDimension("left","strip"):r._paintDimension("top","strip"),r._paintDimension("top","vert"),r._paintDimension("left","horiz")},_paintDimension:function(r,i){var t,e=this,s=e._color,o=e.options.mode,n=e._getHSpaceColor(),a=e.controls[i],l=e.options.controls;if(i!==e.active&&("square"!==e.active||"strip"===i))switch(l[i]){case"h":if("hsv"===o){switch(n=s.clone(),i){case"horiz":n[l.vert](100);break;case"vert":n[l.horiz](100);break;case"strip":n.setHSpace("hsl")}t=n.toHsl()}else t="strip"===i?{s:n.s,l:n.l}:{s:100,l:n.l};a.rainbowGradient(r,t);break;case"s":"hsv"===o?"vert"===i?t=[s.clone().a(0).s(0).toCSS("rgba"),s.clone().a(1).s(0).toCSS("rgba")]:"strip"===i?t=[s.clone().s(100).toCSS("hsl"),s.clone().s(0).toCSS("hsl")]:"horiz"===i&&(t=["#fff","hsl("+n.h+",100%,50%)"]):t="vert"===i&&"h"===e.options.controls.horiz?["hsla(0, 0%, "+n.l+"%, 0)","hsla(0, 0%, "+n.l+"%, 1)"]:["hsl("+n.h+",0%,50%)","hsl("+n.h+",100%,50%)"],a.gradient(r,t);break;case"l":t="strip"===i?["hsl("+n.h+",100%,100%)","hsl("+n.h+", "+n.s+"%,50%)","hsl("+n.h+",100%,0%)"]:["#fff","rgba(255,255,255,0) 50%","rgba(0,0,0,0) 50%","rgba(0,0,0,1)"],a.gradient(r,t);break;case"v":t="strip"===i?[s.clone().v(100).toCSS(),s.clone().v(0).toCSS()]:["rgba(0,0,0,0)","#000"],a.gradient(r,t)}},_getHSpaceColor:function(){return"hsv"===this.options.mode?this._color.toHsv():this._color.toHsl()},_stripOnlyDimensions:function(){var r=this,i=this.options.width,t=.12*i;r.horizontalSlider?r.picker.css({width:i,height:t}).addClass("iris-only-strip iris-strip-horiz"):r.picker.css({width:t,height:i}).addClass("iris-only-strip iris-strip-vert")},_dimensions:function(i){if("hue"===this.options.type)return this._stripOnlyDimensions();var t,e,s,o=this,n=o.options,a=o.controls.square,l=o.picker.find(".iris-strip"),c="77.5%",h="12%",p=n.border?n.width-20:n.width,u=Array.isArray(n.palettes)?n.palettes.length:o._palettes.length;if(i&&(a.css("width",""),l.css("width",""),o.picker.css({width:"",height:""})),c=p*(parseFloat(c)/100),h=p*(parseFloat(h)/100),t=n.border?c+20:c,a.width(c).height(c),l.height(c).width(h),o.picker.css({width:n.width,height:t}),!n.palettes)return o.picker.css("paddingBottom","");s=(c-(u-1)*(e=2*c/100))/u,o.picker.find(".iris-palette").each((function(i){var t=0===i?0:e;r(this).css({width:s,height:s,marginLeft:t})})),o.picker.css("paddingBottom",s+e),l.height(s+e+c)},_addInputListeners:function(r){var i=this,t=function(t){var e=new Color(r.val()),s=r.val().replace(/^#/,"");r.removeClass("iris-error"),e.error?""!==s&&r.addClass("iris-error"):e.toString()!==i._color.toString()&&("keyup"===t.type&&s.match(/^[0-9a-fA-F]{3}$/)||i._setOption("color",e.toString()))};r.on("change",t).on("keyup",i._debounce(t,100)),i.options.hide&&r.one("focus",(function(){i.show()}))},_initControls:function(){var i=this,t=i.controls,e=t.square,s=i.options.controls,o=i._scale[s.strip],n=i.horizontalSlider?"horizontal":"vertical";t.stripSlider.slider({orientation:n,max:o,slide:function(r,t){i.active="strip","h"===s.strip&&"vertical"===n&&(t.value=o-t.value),i._color[s.strip](t.value),i._change.apply(i,arguments)}}),t.squareDrag.draggable({containment:t.square.find(".iris-square-inner"),zIndex:1e3,cursor:"move",drag:function(r,t){i._squareDrag(r,t)},start:function(){e.addClass("iris-dragging"),r(this).addClass("ui-state-focus")},stop:function(){e.removeClass("iris-dragging"),r(this).removeClass("ui-state-focus")}}).on("mousedown mouseup",(function(t){var e="ui-state-focus";t.preventDefault(),"mousedown"===t.type?(i.picker.find("."+e).removeClass(e).trigger("blur"),r(this).addClass(e).trigger("focus")):r(this).removeClass(e)})).on("keydown",(function(r){var e=t.square,s=t.squareDrag,o=s.position(),n=i.options.width/100;switch(r.altKey&&(n*=10),r.keyCode){case 37:o.left-=n;break;case 38:o.top-=n;break;case 39:o.left+=n;break;case 40:o.top+=n;break;default:return!0}o.left=Math.max(0,Math.min(o.left,e.width())),o.top=Math.max(0,Math.min(o.top,e.height())),s.css(o),i._squareDrag(r,{position:o}),r.preventDefault()})),e.on("mousedown",(function(t){var e,s;1===t.which&&r(t.target).is("div")&&(e=i.controls.square.offset(),s={top:t.pageY-e.top,left:t.pageX-e.left},t.preventDefault(),i._squareDrag(t,{position:s}),t.target=i.controls.squareDrag.get(0),i.controls.squareDrag.css(s).trigger(t))})),i.options.palettes&&i._paletteListeners()},_paletteListeners:function(){var i=this;i.picker.find(".iris-palette-container").on("click.palette",".iris-palette",(function(){i._color.fromCSS(r(this).data("color")),i.active="external",i._change()})).on("keydown.palette",".iris-palette",(function(i){if(13!==i.keyCode&&32!==i.keyCode)return!0;i.stopPropagation(),r(this).trigger("click")}))},_squareDrag:function(r,i){var t=this,e=t.options.controls,s=t._squareDimensions(),o=Math.round((s.h-i.position.top)/s.h*t._scale[e.vert]),n=t._scale[e.horiz]-Math.round((s.w-i.position.left)/s.w*t._scale[e.horiz]);t._color[e.horiz](n)[e.vert](o),t.active="square",t._change.apply(t,arguments)},_setOption:function(i,t){var e,s,o=this,n=o.options[i],a=!1;switch(o.options[i]=t,i){case"color":o.onlySlider?(t=parseInt(t,10),t=isNaN(t)||t<0||t>359?n:"hsl("+t+",100,50)",o.options.color=o.options[i]=t,o._color=new Color(t).setHSpace(o.options.mode),o.active="external",o._change()):((t=""+t).replace(/^#/,""),(e=new Color(t).setHSpace(o.options.mode)).error?o.options[i]=n:(o._color=e,o.options.color=o.options[i]=o._color.toString(),o.active="external",o._change()));break;case"palettes":a=!0,t?o._addPalettes():o.picker.find(".iris-palette-container").remove(),n||o._paletteListeners();break;case"width":a=!0;break;case"border":a=!0,s=t?"addClass":"removeClass",o.picker[s]("iris-border");break;case"mode":case"controls":if(n===t)return;return s=o.element,(n=o.options).hide=!o.picker.is(":visible"),o.destroy(),o.picker.remove(),r(o.element).iris(n)}a&&o._dimensions(!0)},_squareDimensions:function(r){var t,e=this.controls.square;return r!==i&&e.data("dimensions")?e.data("dimensions"):(this.controls.squareDrag,t={w:e.width(),h:e.height()},e.data("dimensions",t),t)},_isNonHueControl:function(r,i){return"square"===r&&"h"===this.options.controls.strip||"external"!==i&&("h"!==i||"strip"!==r)},_change:function(){var i=this,t=i.controls,e=i._getHSpaceColor(),s=["square","strip"],o=i.options.controls,n=o[i.active]||"external",a=i.hue;"strip"===i.active?s=[]:"external"!==i.active&&s.pop(),r.each(s,(function(r,s){var n,a,l;if(s!==i.active)switch(s){case"strip":n="h"!==o.strip||i.horizontalSlider?e[o.strip]:i._scale[o.strip]-e[o.strip],t.stripSlider.slider("value",n);break;case"square":a=i._squareDimensions(),l={left:e[o.horiz]/i._scale[o.horiz]*a.w,top:a.h-e[o.vert]/i._scale[o.vert]*a.h},i.controls.squareDrag.css(l)}})),e.h!==a&&i._isNonHueControl(i.active,n)&&i._color.h(a),i.hue=i._color.h(),i.options.color=i._color.toString(),i._inited&&i._trigger("change",{type:i.active},{color:i._color}),i.element.is(":input")&&!i._color.error&&(i.element.removeClass("iris-error"),i.onlySlider?i.element.val()!==i.hue&&i.element.val(i.hue):i.element.val()!==i._color.toString()&&i.element.val(i._color.toString())),i._paint(),i._inited=!0,i.active=!1},_debounce:function(r,i,t){var e,s;return function(){var o,n,a=this,l=arguments;return o=function(){e=null,t||(s=r.apply(a,l))},n=t&&!e,clearTimeout(e),e=setTimeout(o,i),n&&(s=r.apply(a,l)),s}},show:function(){this.picker.show()},hide:function(){this.picker.hide()},toggle:function(){this.picker.toggle()},color:function(r){return!0===r?this._color.clone():r===i?this._color.toString():void this.option("color",r)}},r.widget("a8c.iris",p),r('<style id="iris-css">.iris-picker{display:block;position:relative}.iris-picker,.iris-picker *{-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input+.iris-picker{margin-top:4px}.iris-error{background-color:#ffafaf}.iris-border{border-radius:3px;border:1px solid #aaa;width:200px;background-color:#fff}.iris-picker-inner{position:absolute;top:0;right:0;left:0;bottom:0}.iris-border .iris-picker-inner{top:10px;right:10px;left:10px;bottom:10px}.iris-picker .iris-square-inner{position:absolute;left:0;right:0;top:0;bottom:0}.iris-picker .iris-square,.iris-picker .iris-slider,.iris-picker .iris-square-inner,.iris-picker .iris-palette{border-radius:3px;box-shadow:inset 0 0 5px rgba(0,0,0,.4);height:100%;width:12.5%;float:left;margin-right:5%}.iris-only-strip .iris-slider{width:100%}.iris-picker .iris-square{width:76%;margin-right:10%;position:relative}.iris-only-strip .iris-square{display:none}.iris-picker .iris-square-inner{width:auto;margin:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-square-inner,.iris-ie-9 .iris-palette{box-shadow:none;border-radius:0}.iris-ie-9 .iris-square,.iris-ie-9 .iris-slider,.iris-ie-9 .iris-palette{outline:1px solid rgba(0,0,0,.1)}.iris-ie-lt9 .iris-square,.iris-ie-lt9 .iris-slider,.iris-ie-lt9 .iris-square-inner,.iris-ie-lt9 .iris-palette{outline:1px solid #aaa}.iris-ie-lt9 .iris-square .ui-slider-handle{outline:1px solid #aaa;background-color:#fff;-ms-filter:"alpha(Opacity=30)"}.iris-ie-lt9 .iris-square .iris-square-handle{background:0 0;border:3px solid #fff;-ms-filter:"alpha(Opacity=50)"}.iris-picker .iris-strip{margin-right:0;position:relative}.iris-picker .iris-strip .ui-slider-handle{position:absolute;background:0 0;margin:0;right:-3px;left:-3px;border:4px solid #aaa;border-width:4px 3px;width:auto;height:6px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,.2);opacity:.9;z-index:5;cursor:ns-resize}.iris-strip-horiz .iris-strip .ui-slider-handle{right:auto;left:auto;bottom:-3px;top:-3px;height:auto;width:6px;cursor:ew-resize}.iris-strip .ui-slider-handle:before{content:" ";position:absolute;left:-2px;right:-2px;top:-3px;bottom:-3px;border:2px solid #fff;border-radius:3px}.iris-picker .iris-slider-offset{position:absolute;top:11px;left:0;right:0;bottom:-3px;width:auto;height:auto;background:transparent;border:0;border-radius:0}.iris-strip-horiz .iris-slider-offset{top:0;bottom:0;right:11px;left:-3px}.iris-picker .iris-square-handle{background:transparent;border:5px solid #aaa;border-radius:50%;border-color:rgba(128,128,128,.5);box-shadow:none;width:12px;height:12px;position:absolute;left:-10px;top:-10px;cursor:move;opacity:1;z-index:10}.iris-picker .ui-state-focus .iris-square-handle{opacity:.8}.iris-picker .iris-square-handle:hover{border-color:#999}.iris-picker .iris-square-value:focus .iris-square-handle{box-shadow:0 0 2px rgba(0,0,0,.75);opacity:.8}.iris-picker .iris-square-handle:hover::after{border-color:#fff}.iris-picker .iris-square-handle::after{position:absolute;bottom:-4px;right:-4px;left:-4px;top:-4px;border:3px solid #f9f9f9;border-color:rgba(255,255,255,.8);border-radius:50%;content:" "}.iris-picker .iris-square-value{width:8px;height:8px;position:absolute}.iris-ie-lt9 .iris-square-value,.iris-mozilla .iris-square-value{width:1px;height:1px}.iris-palette-container{position:absolute;bottom:0;left:0;margin:0;padding:0}.iris-border .iris-palette-container{left:10px;bottom:10px}.iris-picker .iris-palette{margin:0;cursor:pointer}.iris-square-handle,.ui-slider-handle{border:0;outline:0}</style>').appendTo("head")}(jQuery),function(r,i){var t=function(r,i){return this instanceof t?this._init(r,i):new t(r,i)};t.fn=t.prototype={_color:0,_alpha:1,error:!1,_hsl:{h:0,s:0,l:0},_hsv:{h:0,s:0,v:0},_hSpace:"hsl",_init:function(r){var t="noop";switch(typeof r){case"object":return r.a!==i&&this.a(r.a),this[t=r.r!==i?"fromRgb":r.l!==i?"fromHsl":r.v!==i?"fromHsv":t](r);case"string":return this.fromCSS(r);case"number":return this.fromInt(parseInt(r,10))}return this},_error:function(){return this.error=!0,this},clone:function(){for(var r=new t(this.toInt()),i=["_alpha","_hSpace","_hsl","_hsv","error"],e=i.length-1;e>=0;e--)r[i[e]]=this[i[e]];return r},setHSpace:function(r){return this._hSpace="hsv"===r?r:"hsl",this},noop:function(){return this},fromCSS:function(r){var i,t=/^(rgb|hs(l|v))a?\(/;if(this.error=!1,(r=r.replace(/^\s+/,"").replace(/\s+$/,"").replace(/;$/,"")).match(t)&&r.match(/\)$/)){if((i=r.replace(/(\s|%)/g,"").replace(t,"").replace(/,?\);?$/,"").split(",")).length<3)return this._error();if(4===i.length&&(this.a(parseFloat(i.pop())),this.error))return this;for(var e=i.length-1;e>=0;e--)if(i[e]=parseInt(i[e],10),isNaN(i[e]))return this._error();return r.match(/^rgb/)?this.fromRgb({r:i[0],g:i[1],b:i[2]}):r.match(/^hsv/)?this.fromHsv({h:i[0],s:i[1],v:i[2]}):this.fromHsl({h:i[0],s:i[1],l:i[2]})}return this.fromHex(r)},fromRgb:function(r,t){return"object"!=typeof r||r.r===i||r.g===i||r.b===i?this._error():(this.error=!1,this.fromInt(parseInt((r.r<<16)+(r.g<<8)+r.b,10),t))},fromHex:function(r){return 3===(r=r.replace(/^#/,"").replace(/^0x/,"")).length&&(r=r[0]+r[0]+r[1]+r[1]+r[2]+r[2]),this.error=!/^[0-9A-F]{6}$/i.test(r),this.fromInt(parseInt(r,16))},fromHsl:function(r){var t,e,s,o,n,a,l,c;return"object"!=typeof r||r.h===i||r.s===i||r.l===i?this._error():(this._hsl=r,this._hSpace="hsl",a=r.h/360,l=r.s/100,c=r.l/100,0===l?t=e=s=c:(n=2*c-(o=c<.5?c*(1+l):c+l-c*l),t=this.hue2rgb(n,o,a+1/3),e=this.hue2rgb(n,o,a),s=this.hue2rgb(n,o,a-1/3)),this.fromRgb({r:255*t,g:255*e,b:255*s},!0))},fromHsv:function(r){var t,e,s,o,n,a,l,c,h,p,u;if("object"!=typeof r||r.h===i||r.s===i||r.v===i)return this._error();switch(this._hsv=r,this._hSpace="hsv",t=r.h/360,e=r.s/100,h=(s=r.v/100)*(1-e),p=s*(1-(c=6*t-(l=Math.floor(6*t)))*e),u=s*(1-(1-c)*e),l%6){case 0:o=s,n=u,a=h;break;case 1:o=p,n=s,a=h;break;case 2:o=h,n=s,a=u;break;case 3:o=h,n=p,a=s;break;case 4:o=u,n=h,a=s;break;case 5:o=s,n=h,a=p}return this.fromRgb({r:255*o,g:255*n,b:255*a},!0)},fromInt:function(r,t){return this._color=parseInt(r,10),isNaN(this._color)&&(this._color=0),this._color>16777215?this._color=16777215:this._color<0&&(this._color=0),t===i&&(this._hsv.h=this._hsv.s=this._hsl.h=this._hsl.s=0),this},hue2rgb:function(r,i,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+6*(i-r)*t:t<.5?i:t<2/3?r+(i-r)*(2/3-t)*6:r},toString:function(){var r=parseInt(this._color,10).toString(16);if(this.error)return"";if(r.length<6)for(var i=6-r.length-1;i>=0;i--)r="0"+r;return"#"+r},toCSS:function(r,i){switch(r=r||"hex",i=parseFloat(i||this._alpha),r){case"rgb":case"rgba":var t=this.toRgb();return i<1?"rgba( "+t.r+", "+t.g+", "+t.b+", "+i+" )":"rgb( "+t.r+", "+t.g+", "+t.b+" )";case"hsl":case"hsla":var e=this.toHsl();return i<1?"hsla( "+e.h+", "+e.s+"%, "+e.l+"%, "+i+" )":"hsl( "+e.h+", "+e.s+"%, "+e.l+"% )";default:return this.toString()}},toRgb:function(){return{r:255&this._color>>16,g:255&this._color>>8,b:255&this._color}},toHsl:function(){var r,i,t=this.toRgb(),e=t.r/255,s=t.g/255,o=t.b/255,n=Math.max(e,s,o),a=Math.min(e,s,o),l=(n+a)/2;if(n===a)r=i=0;else{var c=n-a;switch(i=l>.5?c/(2-n-a):c/(n+a),n){case e:r=(s-o)/c+(s<o?6:0);break;case s:r=(o-e)/c+2;break;case o:r=(e-s)/c+4}r/=6}return 0===(r=Math.round(360*r))&&this._hsl.h!==r&&(r=this._hsl.h),0===(i=Math.round(100*i))&&this._hsl.s&&(i=this._hsl.s),{h:r,s:i,l:Math.round(100*l)}},toHsv:function(){var r,i,t=this.toRgb(),e=t.r/255,s=t.g/255,o=t.b/255,n=Math.max(e,s,o),a=Math.min(e,s,o),l=n,c=n-a;if(i=0===n?0:c/n,n===a)r=i=0;else{switch(n){case e:r=(s-o)/c+(s<o?6:0);break;case s:r=(o-e)/c+2;break;case o:r=(e-s)/c+4}r/=6}return 0===(r=Math.round(360*r))&&this._hsv.h!==r&&(r=this._hsv.h),0===(i=Math.round(100*i))&&this._hsv.s&&(i=this._hsv.s),{h:r,s:i,v:Math.round(100*l)}},toInt:function(){return this._color},toIEOctoHex:function(){var r=this.toString(),i=parseInt(255*this._alpha,10).toString(16);return 1===i.length&&(i="0"+i),"#"+i+r.replace(/^#/,"")},toLuminosity:function(){var r=this.toRgb(),i={};for(var t in r)if(r.hasOwnProperty(t)){var e=r[t]/255;i[t]=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return.2126*i.r+.7152*i.g+.0722*i.b},getDistanceLuminosityFrom:function(r){if(!(r instanceof t))throw"getDistanceLuminosityFrom requires a Color object";var i=this.toLuminosity(),e=r.toLuminosity();return i>e?(i+.05)/(e+.05):(e+.05)/(i+.05)},getMaxContrastColor:function(){var r=this.getDistanceLuminosityFrom(new t("#000")),i=this.getDistanceLuminosityFrom(new t("#fff"));return new t(r>=i?"#000":"#fff")},getReadableContrastingColor:function(r,e){if(!(r instanceof t))return this;var s,o,n=e===i?5:e,a=r.getDistanceLuminosityFrom(this);if(a>=n)return this;if((s=r.getMaxContrastColor()).getDistanceLuminosityFrom(r)<=n)return s;for(o=0===s.toInt()?-1:1;a<n&&(this.l(o,!0),a=this.getDistanceLuminosityFrom(r),0!==this._color&&16777215!==this._color););return this},a:function(r){if(r===i)return this._alpha;var t=parseFloat(r);return isNaN(t)?this._error():(this._alpha=t,this)},darken:function(r){return r=r||5,this.l(-r,!0)},lighten:function(r){return r=r||5,this.l(r,!0)},saturate:function(r){return r=r||15,this.s(r,!0)},desaturate:function(r){return r=r||15,this.s(-r,!0)},toGrayscale:function(){return this.setHSpace("hsl").s(0)},getComplement:function(){return this.h(180,!0)},getSplitComplement:function(r){var i=180+30*(r=r||1);return this.h(i,!0)},getAnalog:function(r){var i=30*(r=r||1);return this.h(i,!0)},getTetrad:function(r){var i=60*(r=r||1);return this.h(i,!0)},getTriad:function(r){var i=120*(r=r||1);return this.h(i,!0)},_partial:function(r){var t=e[r];return function(e,s){var o=this._spaceFunc("to",t.space);return e===i?o[r]:(!0===s&&(e=o[r]+e),t.mod&&(e%=t.mod),t.range&&(e=e<t.range[0]?t.range[0]:e>t.range[1]?t.range[1]:e),o[r]=e,this._spaceFunc("from",t.space,o))}},_spaceFunc:function(r,i,t){var e=i||this._hSpace;return this[r+e.charAt(0).toUpperCase()+e.substr(1)](t)}};var e={h:{mod:360},s:{range:[0,100]},l:{space:"hsl",range:[0,100]},v:{space:"hsv",range:[0,100]},r:{space:"rgb",range:[0,255]},g:{space:"rgb",range:[0,255]},b:{space:"rgb",range:[0,255]}};for(var s in e)e.hasOwnProperty(s)&&(t.fn[s]=t.fn._partial(s));"object"==typeof exports?module.exports=t:r.Color=t}(this);